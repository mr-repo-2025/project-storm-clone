{"version":3,"file":"DeleteItemsAction.js","sourceRoot":"","sources":["../../src/actions/DeleteItemsAction.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,MAAM,EAAe,SAAS,EAAE,MAAM,wBAAwB,CAAC;AAExE,OAAO,QAAQ,MAAM,gBAAgB,CAAC;AACtC,OAAO,QAAQ,MAAM,gBAAgB,CAAC;AAYtC;;GAEG;AAKH,MAAM,OAAO,iBAAkB,SAAQ,MAAM;IACzC,YAAY,UAAoC,EAAE;QAC9C,MAAM,QAAQ,GAAG,OAAO,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC5C,MAAM,SAAS,mBACX,OAAO,EAAE,KAAK,EACd,QAAQ,EAAE,KAAK,EACf,MAAM,EAAE,KAAK,EACb,OAAO,EAAE,KAAK,IACX,OAAO,CAAC,SAAS,CACvB,CAAC;QAEF,KAAK,CAAC;YACF,IAAI,EAAE,SAAS,CAAC,QAAQ;YACxB,IAAI,EAAE,CAAC,KAAiC,EAAE,EAAE;gBACxC,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,KAAK,CAAC,KAAK,CAAC;gBAChE,0BAA0B;gBAC1B,0CAA0C;gBAE1C,IAAI,GAAG,KAAK,QAAQ,IAAI,QAAQ,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,SAAS,CAAC,EAAE,CAAC;oBAClF,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,mBAAmB,EAAE,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;wBAC1D,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,mBAAmB,EAAE,EAAE,CAAC,KAAK,EAAE,EAAE;4BAC7D,yCAAyC;4BACzC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,CAAC;gCACpB,KAAK,CAAC,MAAM,EAAE,CAAC;4BACnB,CAAC;wBACL,CAAC,CAAC,CAAC;wBACH,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC;oBAChC,CAAC;gBACL,CAAC;YACL,CAAC;SACJ,CAAC,CAAC;IACP,CAAC;CACJ","sourcesContent":["import { Action, ActionEvent, InputType } from '../core-actions/Action';\r\nimport { KeyboardEvent } from 'react';\r\nimport _forEach from 'lodash/forEach';\r\nimport _isEqual from 'lodash/isEqual';\r\n\r\nexport interface DeleteItemsActionOptions {\r\n    keys?: string[];\r\n    modifiers?: {\r\n        ctrlKey?: boolean;\r\n        shiftKey?: boolean;\r\n        altKey?: boolean;\r\n        metaKey?: boolean;\r\n    };\r\n}\r\n\r\n/**\r\n * Deletes all selected items\r\n */\r\n\r\n\r\n\r\n\r\nexport class DeleteItemsAction extends Action {\r\n    constructor(options: DeleteItemsActionOptions = {}) {\r\n        const keyCodes = options.keys || ['Delete'];\r\n        const modifiers = {\r\n            ctrlKey: false,\r\n            shiftKey: false,\r\n            altKey: false,\r\n            metaKey: false,\r\n            ...options.modifiers\r\n        };\r\n\r\n        super({\r\n            type: InputType.KEY_DOWN,\r\n            fire: (event: ActionEvent<KeyboardEvent>) => {\r\n                const { key, ctrlKey, shiftKey, altKey, metaKey } = event.event;\r\n                // console.log('key',key);\r\n                // console.log('event.event',event.event);\r\n                \r\n                if (key === 'Delete' && _isEqual({ ctrlKey, shiftKey, altKey, metaKey }, modifiers)) {\r\n                    if (this.engine.getModel().getSelectedEntities().length > 0) {\r\n                        _forEach(this.engine.getModel().getSelectedEntities(), (model) => {\r\n                            // only delete items which are not locked\r\n                            if (!model.isLocked()) {\r\n                                model.remove();\r\n                            }\r\n                        });\r\n                        this.engine.repaintCanvas();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n}"]}
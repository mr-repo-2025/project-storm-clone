{"version":3,"file":"TransformLayerWidget.js","sourceRoot":"","sources":["../../../src/entities/layer/TransformLayerWidget.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAC/B,OAAO,MAAM,MAAM,iBAAiB,CAAC;AAGrC,OAAO,EAAE,GAAG,EAAE,MAAM,gBAAgB,CAAC;AAMrC,IAAU,CAAC,CAqBV;AArBD,WAAU,CAAC;IACV,MAAM,MAAM,GAAG,GAAG,CAAA;;;;;;;;;;;EAWjB,CAAC;IAEW,UAAQ,GAAG,MAAM,CAAC,GAAG,CAAA;IAC/B,MAAM;EACR,CAAC;IAEW,UAAQ,GAAG,MAAM,CAAC,GAAG,CAAA;IAC/B,MAAM;EACR,CAAC;AACH,CAAC,EArBS,CAAC,KAAD,CAAC,QAqBV;AAED,MAAM,OAAO,oBAAqB,SAAQ,KAAK,CAAC,SAA6D;IAC5G,YAAY,KAAgC;QAC3C,KAAK,CAAC,KAAK,CAAC,CAAC;QACb,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;IACjB,CAAC;IAED,YAAY;QACX,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC;QAC3C,OAAO;;MAEH,KAAK,CAAC,UAAU,EAAE;MAClB,KAAK,CAAC,UAAU,EAAE;;MAElB,KAAK,CAAC,YAAY,EAAE,GAAG,KAAK;;IAE9B,CAAC;IACJ,CAAC;IAED,iBAAiB;QAChB,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,WAAW,EAAE,CAAC;YAC/C,OAAO;gBACN,SAAS,EAAE,IAAI,CAAC,YAAY,EAAE;aAC9B,CAAC;QACH,CAAC;QACD,OAAO,EAAE,CAAC;IACX,CAAC;IAED,MAAM;QACL,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,WAAW,EAAE,CAAC;YAC/C,OAAO,oBAAC,CAAC,CAAC,QAAQ,IAAC,KAAK,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAc,CAAC;QACxF,CAAC;QACD,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,KAAK,EAAE,CAAC;YACzC,OAAO,oBAAC,CAAC,CAAC,QAAQ,IAAC,KAAK,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAc,CAAC;QACxF,CAAC;QACD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,WAAW,EAAE,CAAC;YAChD,OAAO,oBAAC,CAAC,CAAC,QAAQ,IAAC,KAAK,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAc,CAAC;QACxF,CAAC;QACD,0FAA0F;IAC3F,CAAC;CACD","sourcesContent":["import * as React from 'react';\r\nimport styled from '@emotion/styled';\r\nimport { CSSProperties } from 'react';\r\nimport { LayerModel } from './LayerModel';\r\nimport { css } from '@emotion/react';\r\n\r\nexport interface TransformLayerWidgetProps {\r\n\tlayer: LayerModel;\r\n}\r\n\r\nnamespace S {\r\n\tconst shared = css`\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tposition: absolute;\r\n\t\tpointer-events: none;\r\n\t\ttransform-origin: 0 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\toverflow: visible;\r\n\t`;\r\n\r\n\texport const DivLayer = styled.div`\r\n\t\t${shared}\r\n\t`;\r\n\r\n\texport const SvgLayer = styled.svg`\r\n\t\t${shared}\r\n\t`;\r\n}\r\n\r\nexport class TransformLayerWidget extends React.Component<React.PropsWithChildren<TransformLayerWidgetProps>> {\r\n\tconstructor(props: TransformLayerWidgetProps) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tgetTransform() {\r\n\t\tconst model = this.props.layer.getParent();\r\n\t\treturn `\r\n\t\t\ttranslate(\r\n\t\t\t\t${model.getOffsetX()}px,\r\n\t\t\t\t${model.getOffsetY()}px)\r\n\t\t\tscale(\r\n\t\t\t\t${model.getZoomLevel() / 100.0}\r\n\t\t\t)\r\n  \t`;\r\n\t}\r\n\r\n\tgetTransformStyle(): CSSProperties {\r\n\t\tif (this.props.layer.getOptions().transformed) {\r\n\t\t\treturn {\r\n\t\t\t\ttransform: this.getTransform()\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn {};\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.layer.getOptions().isWorktable) {\r\n\t\t\treturn <S.DivLayer style={this.getTransformStyle()}>{this.props.children}</S.DivLayer>;\r\n\t\t}\r\n\t\tif (this.props.layer.getOptions().isSvg) {\r\n\t\t\treturn <S.SvgLayer style={this.getTransformStyle()}>{this.props.children}</S.SvgLayer>;\r\n\t\t}\r\n\t\tif (!this.props.layer.getOptions().isWorktable) {\r\n\t\t\treturn <S.DivLayer style={this.getTransformStyle()}>{this.props.children}</S.DivLayer>;\r\n\t\t}\r\n\t\t// return <S.DivLayer style={this.getTransformStyle()}>{this.props.children}</S.DivLayer>;\r\n\t}\r\n}\r\n"]}